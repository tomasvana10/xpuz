"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},u=Object.prototype,n=u.hasOwnProperty,o=Object.defineProperty||function(t,e,u){t[e]=u.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(t,e,u){return Object.defineProperty(t,e,{value:u,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(t){a=function(t,e,u){return t[e]=u}}function c(t,e,u,n){var r=e&&e.prototype instanceof p?e:p,i=Object.create(r.prototype),l=new L(n||[]);return o(i,"_invoke",{value:w(t,u,l)}),i}function D(t,e,u){try{return{type:"normal",arg:t.call(e,u)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",C="executing",F="completed",f={};function p(){}function E(){}function A(){}var m={};a(m,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(S([])));v&&v!==u&&n.call(v,i)&&(m=v);var g=A.prototype=p.prototype=Object.create(m);function B(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function u(o,r,i,l){var s=D(t[o],t,r);if("throw"!==s.type){var a=s.arg,c=a.value;return c&&"object"==_typeof(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){u("next",t,i,l)}),(function(t){u("throw",t,i,l)})):e.resolve(c).then((function(t){a.value=t,i(a)}),(function(t){return u("throw",t,i,l)}))}l(s.arg)}var r;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){u(t,n,e,o)}))}return r=r?r.then(o,o):o()}})}function w(e,u,n){var o=d;return function(r,i){if(o===C)throw Error("Generator is already running");if(o===F){if("throw"===r)throw i;return{value:t,done:!0}}for(n.method=r,n.arg=i;;){var l=n.delegate;if(l){var s=k(l,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=F,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=C;var a=D(e,u,n);if("normal"===a.type){if(o=n.done?F:h,a.arg===f)continue;return{value:a.arg,done:n.done}}"throw"===a.type&&(o=F,n.method="throw",n.arg=a.arg)}}}function k(e,u){var n=u.method,o=e.iterator[n];if(o===t)return u.delegate=null,"throw"===n&&e.iterator.return&&(u.method="return",u.arg=t,k(e,u),"throw"===u.method)||"return"!==n&&(u.method="throw",u.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=D(o,e.iterator,u.arg);if("throw"===r.type)return u.method="throw",u.arg=r.arg,u.delegate=null,f;var i=r.arg;return i?i.done?(u[e.resultName]=i.value,u.next=e.nextLoc,"return"!==u.method&&(u.method="next",u.arg=t),u.delegate=null,f):i:(u.method="throw",u.arg=new TypeError("iterator result is not an object"),u.delegate=null,f)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function S(e){if(e||""===e){var u=e[i];if(u)return u.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function u(){for(;++o<e.length;)if(n.call(e,o))return u.value=e[o],u.done=!1,u;return u.value=t,u.done=!0,u};return r.next=r}}throw new TypeError(_typeof(e)+" is not iterable")}return E.prototype=A,o(g,"constructor",{value:A,configurable:!0}),o(A,"constructor",{value:E,configurable:!0}),E.displayName=a(A,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,a(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},B(b.prototype),a(b.prototype,l,(function(){return this})),e.AsyncIterator=b,e.async=function(t,u,n,o,r){void 0===r&&(r=Promise);var i=new b(c(t,u,n,o),r);return e.isGeneratorFunction(u)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},B(g),a(g,s,"Generator"),a(g,i,(function(){return this})),a(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),u=[];for(var n in e)u.push(n);return u.reverse(),function t(){for(;u.length;){var n=u.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=S,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var u in this)"t"===u.charAt(0)&&n.call(this,u)&&!isNaN(+u.slice(1))&&(this[u]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var u=this;function o(n,o){return l.type="throw",l.arg=e,u.next=n,o&&(u.method="next",u.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),a=n.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!a)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var u=this.tryEntries.length-1;u>=0;--u){var o=this.tryEntries[u];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=e,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var u=this.tryEntries[e];if(u.finallyLoc===t)return this.complete(u.completion,u.afterLoc),_(u),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var u=this.tryEntries[e];if(u.tryLoc===t){var n=u.completion;if("throw"===n.type){var o=n.arg;_(u)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,u,n){return this.delegate={iterator:S(e),resultName:u,nextLoc:n},"next"===this.method&&(this.arg=t),f}},e}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var u=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=u){var n,o,r,i,l=[],s=!0,a=!1;try{if(r=(u=u.call(t)).next,0===e){if(Object(u)!==u)return;s=!1}else for(;!(s=(n=r.call(u)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{if(!s&&null!=u.return&&(i=u.return(),Object(i)!==i))return}finally{if(a)throw o}}return l}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var u="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!u){if(Array.isArray(t)||(u=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){u&&(t=u);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,l=!1;return{s:function(){u=u.call(t)},n:function(){var t=u.next();return i=t.done,t},e:function(t){l=!0,r=t},f:function(){try{i||null==u.return||u.return()}finally{if(l)throw r}}}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var u=Object.prototype.toString.call(t).slice(8,-1);return"Object"===u&&t.constructor&&(u=t.constructor.name),"Map"===u||"Set"===u?Array.from(t):"Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var u=0,n=new Array(e);u<e;u++)n[u]=t[u];return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var u=0;u<e.length;u++){var n=e[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,u){return e&&_defineProperties(t.prototype,e),u&&_defineProperties(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var u=t[Symbol.toPrimitive];if(void 0!==u){var n=u.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var arrowKeys=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],spacebarKeys=["Spacebar"," "],backspaceKeys=["Backspace","Delete"],compoundInputPlaceholders=["ㅇ","+","ㅏ","=","아","क​","+","इ","=","कै"],onlyLangRegex=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/,Interaction=function(){function Interaction(){_classCallCheck(this,Interaction),this.direction="ACROSS",this.currentWord=null,this.cellCoords=null,this.wasEmpty=null,this.staticIndex=null,this.isDown=null,this.compoundInputActive=null,this.completionPopupToggled=!1,this.onloadPopupToggled=!1,this.currentDropdown=null,this.currentPlaceholder=0,this.doNotHandleStandardCellClick=!1,this.preventInitialLIZoom=!0,this.setCoordsToEndOfWord=!1,document.addEventListener("DOMContentLoaded",this.onLoad.bind(this))}return _createClass(Interaction,[{key:"onLoad",value:function onLoad(){this.body=document.querySelector("body"),this.grid=eval(this.body.getAttribute("data-grid")),this.directions=eval(this.body.getAttribute("data-directions")),this.dimensions=parseInt(this.body.getAttribute("data-dimensions")),this.empty=this.body.getAttribute("data-empty"),this.colourPalette=JSON.parse(this.body.getAttribute("data-colour_palette")),this.intersections=JSON.stringify(eval(this.body.getAttribute("data-intersections"))),this.errMsgs=eval(this.body.getAttribute("data-js_err_msgs")),this.wordCount=this.body.getAttribute("data-word_count"),this.skipToggle=document.getElementById("ts"),this.zoomToggle=document.getElementById("tz"),this.wordToggle=document.getElementById("tw"),this.checkToggle=document.getElementById("tc"),this.returnDefZoomElement=document.getElementById("return_def_zoom"),this.returnGridZoomElement=document.getElementsByClassName("empty_cell")[0],this.jazz=document.getElementById("jazz"),this.jazz.volume=.125,this.clicks=_toConsumableArray(document.getElementsByClassName("click")),this.clicks.forEach((function(t){return t.volume=.175})),this.playClicks=!1,this.setListeners(),Interaction.configureScrollHeights(),this.displayOnloadPopup(),this.doSpecialButtonAction("grid","clear",!1),setInterval(this.cycleCompoundInputPlaceholderText.bind(this),750)}},{key:"setListeners",value:function(){var t=this;document.querySelectorAll(".non_empty_cell").forEach((function(e){e.onclick=function(u){return t.onCellClick(u,e)},e.classList.add("zoomTarget")})),document.querySelectorAll(".empty_cell").forEach((function(e){e.onclick=function(){return t.removeCompoundInput(!1)}})),document.querySelectorAll(".def").forEach((function(e){return e.onclick=function(u){t.onDefinitionsListItemClick(u,e.getAttribute("data-num"),e.getAttribute("data-direction"))}})),this.zoomToggle.addEventListener("change",(function(e){e.target.checked||t.zoomOut()})),document.getElementById("compound_button").onclick=function(e){e.stopPropagation(),t.handleSetCompoundInput(!1)},document.addEventListener("keydown",(function(e){return t.handleSpecialInput(e)})),document.addEventListener("click",(function(e){return t.handleClick(e)})),document.addEventListener("focusout",(function(e){return t.handleDropdownFocusOut(e)}))}},{key:"playClick",value:function(){if(this.playClicks)try{return this.clicks[Math.floor(Math.random()*this.clicks.length)].play()}catch(t){}}},{key:"zoomOut",value:function(){document.querySelector(".non_empty_cell.selectedZoomTarget")?this.returnGridZoomElement.click():document.querySelector(".def.selectedZoomTarget")&&this.returnDefZoomElement.click()}},{key:"handleSpecialInput",value:function(t){if(!this.onloadPopupToggled&&!this.completionPopupToggled){var e=t.key;if(this.playClick(),"!"===e&&t.shiftKey)return t.preventDefault(),this.handleSetCompoundInput();if(this.compoundInputActive)("Enter"===e||"Escape"===e||"!"===e&&t.shiftKey)&&this.removeCompoundInput();else{if(!("Enter"!==e||t.target.classList.contains("def")||"BUTTON"===t.target.tagName||t.target.classList.contains("special_button")||document.activeElement.classList.contains("def")||document.activeElement.classList.contains("toggle")||t.target.classList.contains("dropdown_button")))return this.handleEnterKeybindPress(t);if(backspaceKeys.includes(e)&&t.shiftKey)return this.doSpecialButtonAction("word","clear",!1);if("Enter"===e&&!this.completionPopupToggled&&!this.onloadPopupToggled)return this.handleEnterPress(t);if("Escape"===e)return this.handleEscapePress(t);if(null!==this.cellCoords)return _toConsumableArray(arrowKeys.slice(2,4)).includes(e)&&t.shiftKey?this.shiftWordSelection(t,e):arrowKeys.includes(e)?this.handleArrowPress(e,t):this.intersections.includes(JSON.stringify(this.cellCoords))&&spacebarKeys.includes(e)?this.handleSpacebarPress(t):void this.handleStandardInput(e)}}}},{key:"handleStandardInput",value:function(t){var e=backspaceKeys.includes(t)?"del":"enter",u=Interaction.getCellElement(this.cellCoords);if("enter"===e){if(1!==t.length||!t.match(onlyLangRegex))return;u.classList.contains("lock_in")||(Interaction.isEmpty(u)&&(this.wasEmpty=!0),Interaction.setValue(u,t),this.checkToggle.checked&&(u.classList.remove("wrong"),this.doGridOperation(u,"check"))),this.checkToggle.checked||u.classList.remove("wrong")}else if("del"===e){if(!Interaction.isEmpty(u)&&!u.classList.contains("lock_in"))return u.classList.remove("wrong"),Interaction.setValue(u,"");var n=Interaction.getCellElement(this.shiftCellCoords(this.cellCoords,this.direction,e));n.classList.contains("lock_in")||(Interaction.setValue(n,""),n.classList.remove("wrong"))}this.crosswordCompletionHandler(),this.handleCellShift(e,u)}},{key:"handleCellShift",value:function(t,e){this.changeCellFocus(!1);var u=this.cellCoords;"enter"===t&&this.skipToggle.checked?this.cellCoords=this.skipCellCoords(this.cellCoords,this.direction,t):this.cellCoords=this.shiftCellCoords(this.cellCoords,this.direction,t),this.autoShiftWordIfPossible(t,u),this.followCellZoom(e),this.changeWordFocus(!0),this.changeCellFocus(!0)}},{key:"autoShiftWordIfPossible",value:function(t,e){if(this.wordToggle.checked){var u="del"===t?arrowKeys[2]:arrowKeys[3];!e.isEqualTo(this.cellCoords)||Interaction.isEmpty(Interaction.getCellElement(this.cellCoords))&&"del"!==t||this.shiftWordSelection(null,u)}}},{key:"shiftWordSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;null==t||t.preventDefault();var u=e===arrowKeys[2]?-1:1,n=this.getDefinitionsListItemFromWord(),o=Number(n.getAttribute("data-num"))+u,r=document.querySelector('[data-num="'.concat(o,'"'));if(!r){var i=1===u?"1":this.wordCount;r=document.querySelector('[data-num="'.concat(i,'"]'))}var l=this.cellCoords;-1===u&&(this.setCoordsToEndOfWord=!0),r.focus(),r.click(),r.blur(),this.followCellZoom(l)}},{key:"skipCellCoords",value:function(t,e){var u=this.shiftCellCoords(t,e,"enter");if(u.isEqualTo(t))return u;if(!this.wasEmpty)return u;for(this.wasEmpty=!1;!Interaction.isEmpty(Interaction.getCellElement(u));){var n=u;if(u=this.shiftCellCoords(u,e,"enter"),n.isEqualTo(u))break}return Interaction.isEmpty(Interaction.getCellElement(u))?u:this.shiftCellCoords(t,e,"enter")}},{key:"shiftCellCoords",value:function(t,e,u){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o="enter"==u?1:-1,r=e===this.directions[1]?[t[0]+o,t[1]]:[t[0],t[1]+o],i=Interaction.getCellElement(r);return null!==i&&i.classList.contains("non_empty_cell")||n?r:t}},{key:"onDefinitionsListItemClick",value:function(t,e,u){var n=document.querySelector('[data-num_label="'.concat(e,'"]')).parentElement;this.preventZoomIfRequired(t),this.removeCompoundInputIfRequired(n),this.setFocusMode(!1),document.activeElement.blur(),this.compoundInputActive&&document.getElementsByClassName("compound_input")[0].focus(),this.direction=u,this.cellCoords=Interaction.updateCellCoords(n),this.setCoordsToEndOfWord&&(this.cellCoords=Interaction.updateCellCoords(_toConsumableArray(this.getWordElements()).slice(-1)[0]),this.setCoordsToEndOfWord=!1),this.currentWord=this.updateCurrentWord(),this.setFocusMode(!0)}},{key:"onCellClick",value:function(t,e){if(this.doNotHandleStandardCellClick)return this.doNotHandleStandardCellClick=!1;this.preventZoomIfRequired(t),this.removeCompoundInputIfRequired(e),this.setFocusMode(!1);var u=Interaction.updateCellCoords(e);(this.intersections.includes(JSON.stringify(u))&&u.isEqualTo(this.cellCoords)||this.shouldDirectionBeAlternated(u))&&this.alternateDirection(),this.cellCoords=u,this.currentWord=this.updateCurrentWord(),this.setFocusMode(!0),this.updateDefinitionsListPos()}},{key:"handleArrowPress",value:function(t,e){e.preventDefault();var u="ArrowDown"===t||"ArrowRight"===t?"enter":"del",n="ArrowDown"===t||"ArrowUp"===t?this.directions[1]:this.directions[0],o=Interaction.getCellElement(this.cellCoords),r=this.shiftCellCoords(this.cellCoords,n,u,!0),i=!1;try{for(;Interaction.getCellElement(r).classList.contains("empty_cell");)r=this.shiftCellCoords(r,n,u,!0),i=!0}catch(t){r=this.cellCoords}this.setFocusMode(!1),this.shouldDirectionBeAlternated(r)?(this.alternateDirection(),i&&(this.cellCoords=r),i=!1):this.cellCoords=r,this.followCellZoom(o),this.currentWord=this.updateCurrentWord(),this.setFocusMode(!0),this.updateDefinitionsListPos()}},{key:"handleEnterPress",value:function(t){t.target.classList.contains("def")?(t.target.click(),t.target.blur(),this.zoomToggle.checked&&(this.doNotHandleStandardCellClick=!0,Interaction.getCellElement(this.cellCoords).click())):t.target.classList.contains("toggle")&&t.target.click()}},{key:"handleEnterKeybindPress",value:function(t){Interaction.unfocusActiveElement(),this.hideDropdowns();var e=t.shiftKey?"reveal":"check";this.doSpecialButtonAction("word",e,!1)}},{key:"handleSpacebarPress",value:function(t){t.preventDefault(),this.setFocusMode(!1),this.alternateDirection(),this.currentWord=this.updateCurrentWord(),this.setFocusMode(!0),this.updateDefinitionsListPos()}},{key:"handleEscapePress",value:function(t){null==t||t.preventDefault(),Interaction.unfocusActiveElement(),this.hideDropdowns(),this.setFocusMode(!1),this.zoomOut(),this.cellCoords=null,this.currentWord=null}},{key:"crosswordCompletionHandler",value:function(){var t=this;this.isCrosswordComplete()&&Interaction.sleep(1).then((function(){t.handleEscapePress(null),t.displayCompletionPopup(),t.jazz.play()}))}},{key:"doSpecialButtonAction",value:function(t,e){var u=this,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if((!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.onDropdownClick(e+"_dropdown"),null===this.cellCoords&&"grid"!==t)return alert(this.errMsgs[0]);switch(t){case"cell":var o=Interaction.getCellElement(this.cellCoords);this.doGridOperation(o,e),"reveal"===e&&this.handleCellShift("enter",o);break;case"word":var r,i=_createForOfIteratorHelper(this.getWordElements());try{for(i.s();!(r=i.n()).done;){var l=r.value;this.doGridOperation(l,e)}}catch(t){i.e(t)}finally{i.f()}"reveal"===e&&this.wordToggle.checked&&this.shiftWordSelection(null,"ArrowDown");break;case"grid":document.querySelectorAll(".non_empty_cell").forEach((function(t){return u.doGridOperation(t,e,n)}))}this.crosswordCompletionHandler()}},{key:"doGridOperation",value:function(t,e){var u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"reveal"===e?(t.classList.remove("wrong"),Interaction.setValue(t,t.getAttribute("data-value")),t.classList.add("lock_in")):"check"===e?Interaction.isEmpty(t)||(t.hasCorrectValue()?t.classList.add("lock_in"):t.classList.add("wrong")):"clear"===e&&(u&&!t.classList.contains("lock_in")||!u)&&(t.classList.remove("lock_in"),t.classList.remove("wrong"),Interaction.setValue(t,""))}},{key:"shouldDirectionBeAlternated",value:function(t){return this.shiftCellCoords(t,this.direction,"enter").isEqualTo(t)&&this.shiftCellCoords(t,this.direction,"del").isEqualTo(t)}},{key:"setFocusMode",value:function(t){null!==this.cellCoords&&(this.changeWordFocus(t),this.changeCellFocus(t),this.changeDefinitionsListItemFocus(t))}},{key:"changeWordFocus",value:function(t){var e,u=_createForOfIteratorHelper(this.getWordElements());try{for(u.s();!(e=u.n()).done;){e.value.style.backgroundColor=t?this.colourPalette.WORD_FOCUS:this.colourPalette.SUB}}catch(t){u.e(t)}finally{u.f()}}},{key:"changeCellFocus",value:function(t){return Interaction.getCellElement(this.cellCoords).style.backgroundColor=t?this.colourPalette.CELL_FOCUS:this.colourPalette.SUB}},{key:"changeDefinitionsListItemFocus",value:function(t){return this.getDefinitionsListItemFromWord().style.backgroundColor=t?this.colourPalette.WORD_FOCUS:""}},{key:"updateCurrentWord",value:function(){var t,e="",u=_createForOfIteratorHelper(this.getWordElements());try{for(u.s();!(t=u.n()).done;){e+=t.value.getAttribute("data-value")}}catch(t){u.e(t)}finally{u.f()}return e.toUpperCase()}},{key:"getWordElements",value:_regeneratorRuntime().mark((function t(){var e,u,n,o,r,i;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.getWordIndices(),u=_slicedToArray(e,2),n=u[0],o=u[1],r=n;case 2:if(!(r<=o)){t.next=9;break}return i=this.isDown?[r,this.staticIndex]:[this.staticIndex,r],t.next=6,Interaction.getCellElement(i);case 6:r++,t.next=2;break;case 9:case"end":return t.stop()}}),t,this)}))},{key:"getWordIndices",value:function(){var t=_slicedToArray(this.cellCoords,2),e=t[0],u=t[1];this.isDown=this.direction===this.directions[1],this.staticIndex=this.isDown?u:e;for(var n=_slicedToArray(this.isDown?[e,e]:[u,u],2),o=n[0],r=n[1];o>0&&this.grid[this.isDown?o-1:e][this.isDown?u:o-1]!=this.empty;)o--;for(;r<this.dimensions-1&&this.grid[this.isDown?r+1:e][this.isDown?u:r+1]!=this.empty;)r++;return[o,r]}},{key:"alternateDirection",value:function(){return this.direction=this.direction===this.directions[0]?this.directions[1]:this.directions[0]}},{key:"getDefinitionsListItemFromWord",value:function(){return document.querySelector('[data-word="'.concat(this.currentWord,'"]'))}},{key:"updateDefinitionsListPos",value:function(){var t=this.getDefinitionsListItemFromWord(this.currentWord);t.focus(),t.blur()}},{key:"isCrosswordComplete",value:function(){return this.getGrid().isEqualTo(this.grid)}},{key:"getGrid",value:function(){var t=this,e=Array.from({length:this.dimensions},(function(){return Array(t.dimensions).fill(t.empty)}));return document.querySelectorAll(".non_empty_cell").forEach((function(t){var u=parseInt(t.getAttribute("data-row")),n=parseInt(t.getAttribute("data-column")),o=t.childNodes[0].nodeValue.toUpperCase();e[u][n]=o})),e}},{key:"setCompoundInput",value:function(t){this.compoundInputActive=!0,t||(this.wasEmpty=!0);var e=Interaction.getCellElement(this.cellCoords);e.onclick=function(t){return Interaction.dummyCellClick(t)},Interaction.setValue(e,"");var u=document.createElement("input");u.value=t,u.type="text",u.classList.add("compound_input"),e.appendChild(u),u.focus()}},{key:"handleSetCompoundInput",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===this.cellCoords)return alert(this.errMsgs[0]);if(document.getElementsByClassName("compound_input")[0])return this.removeCompoundInput(t);var e=Interaction.getCellElement(this.cellCoords).childNodes,u=e[0].nodeValue;e.length>1&&(e[1].style.display="none"),this.setCompoundInput(u)}},{key:"removeCompoundInput",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.compoundInputActive){var u=document.getElementsByClassName("compound_input")[0],n=u.parentElement,o=u.value;try{o[0].match(onlyLangRegex)||(o="")}catch(t){o=""}u.remove();var r=n.childNodes;r[0].nodeValue=o[0],r.length>1&&(r[1].style.display="inline"),n.onclick=function(e){return t.onCellClick(e,n)},n.classList.remove("lock_in","wrong"),this.compoundInputActive=!1,this.currentPlaceholder=0,this.checkToggle.checked&&this.doGridOperation(n,"check"),e&&this.handleCellShift("enter",n)}}},{key:"cycleCompoundInputPlaceholderText",value:function(){var t=document.getElementsByClassName("compound_input")[0];void 0!==t&&(t.placeholder=compoundInputPlaceholders[this.currentPlaceholder],this.currentPlaceholder===compoundInputPlaceholders.length-1?this.currentPlaceholder=0:this.currentPlaceholder+=1)}},{key:"removeCompoundInputIfRequired",value:function(t){this.compoundInputActive&&t!==Interaction.getCellElement(this.cellCoords)&&this.removeCompoundInput()}},{key:"followCellZoom",value:function(t){if(1===document.querySelectorAll(".non_empty_cell.selectedZoomTarget").length){var e=Interaction.getCellElement(this.cellCoords);if(e!==t)return this.doNotHandleStandardCellClick=!0,e.click()}}},{key:"handleClick",value:function(t){t.target.closest(".special_button, .dropdown, .dropdown_button")||(this.hideDropdowns(),this.removeCompoundInput(!1))}},{key:"handleDropdownFocusOut",value:function(t){var e,u,n,o,r,i,l,s,a;(null===(e=t.relatedTarget)||void 0===e||!e.classList.contains("dropdown_button")||null!==(u=t.target)&&void 0!==u&&u.classList.contains("dropdown_button")&&null!==(n=t.relatedTarget)&&void 0!==n&&n.classList.contains("special_button")&&(null===(o=t.relatedTarget)||void 0===o||!o.id.startsWith(null===(r=this.currentDropdown)||void 0===r?void 0:r.substring(0,null===(i=this.currentDropdown)||void 0===i?void 0:i.indexOf("_"))))||null!==(l=t.target.id)&&void 0!==l&&l.endsWith("button")&&(null!==(s=t.relatedTarget)&&void 0!==s&&null!==(s=s.id)&&void 0!==s&&s.endsWith("button")||null===(a=t.relatedTarget)||void 0===a||null===(a=a.classList)||void 0===a||!a.contains("dropdown_button")))&&this.hideDropdowns()}},{key:"hideDropdowns",value:function(){document.querySelectorAll(".dropdown").forEach((function(t){return t.classList.remove("show_dropdown")})),document.querySelectorAll(".special_button").forEach((function(t){return t.innerHTML=t.innerHTML.replace("▲","▼")})),this.currentDropdown=null}},{key:"onDropdownClick",value:function(t){this.removeCompoundInput(!1);var e=document.getElementById(t);if(t===this.currentDropdown)return this.hideDropdowns(),void(this.currentDropdown=null);this.hideDropdowns();var u=document.getElementById(t.replace("_dropdown","_button"));u.innerHTML=u.innerHTML.replace("▼","▲"),e.classList.add("show_dropdown"),this.currentDropdown=t}},{key:"displayOnloadPopup",value:function(){this.onloadPopupToggled=!0,Interaction.sleep(200).then((function(){document.getElementById("blur").classList.toggle("active"),document.getElementById("onload_popup").classList.toggle("active"),Interaction.sleep(301).then((function(){document.getElementsByClassName("continue_button")[0].focus({focusVisible:!0})}))}))}},{key:"displayCompletionPopup",value:function(){this.completionPopupToggled=!this.completionPopupToggled,document.getElementById("blur").classList.toggle("active"),document.getElementById("completion_popup").classList.toggle("active"),this.completionPopupToggled&&Interaction.sleep(501).then((function(){return document.getElementsByClassName("close_button")[0].focus({focusVisible:!0})}))}},{key:"closeOnloadPopup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.onloadPopupToggled=!1,document.getElementById("blur").classList.toggle("active"),document.getElementById("onload_popup").classList.toggle("active"),t&&document.querySelector('[data-num="1"').click()}},{key:"preventZoomIfRequired",value:function(t){document.getElementById("tz").checked&&!this.preventInitialLIZoom||(this.preventInitialLIZoom=!1,t.stopImmediatePropagation())}}],[{key:"dummyCellClick",value:function(t){return t.stopImmediatePropagation()}},{key:"unfocusActiveElement",value:function(){document.activeElement.blur()}},{key:"emulateEscapePress",value:function(){return document.dispatchEvent(new KeyboardEvent("keyboard",{key:"Escape"}))}},{key:"sleep",value:function(t){return new Promise((function(e){return setTimeout(e,t)}))}},{key:"isEmpty",value:function(t){var e;return!(null!=t&&null!==(e=t.childNodes[0])&&void 0!==e&&e.nodeValue)}},{key:"setValue",value:function(t,e){return t.childNodes[0].nodeValue=e}},{key:"getCellElement",value:function(t){return document.querySelector('[data-row="'.concat(t[0],'"][data-column="').concat(t[1],'"]'))}},{key:"updateCellCoords",value:function(t){return[parseInt(t.getAttribute("data-row")),parseInt(t.getAttribute("data-column"))]}},{key:"configureScrollHeights",value:function(){var t=document.querySelector(".definitions_a"),e=document.querySelector(".definitions_d");document.getElementById("return_def_zoom").style.height=Math.max(t.scrollHeight,e.scrollHeight)+"px";var u=document.getElementById("no_scroll");u.scrollHeight-1>u.clientHeight&&(u.style.overflowY="auto")}}])}();Array.prototype.isEqualTo=function(t){return JSON.stringify(this)===JSON.stringify(t)},Element.prototype.hasCorrectValue=function(){return this.childNodes[0].nodeValue.toUpperCase()===this.getAttribute("data-value")};var interaction=new Interaction;function egg(){return interaction.playClicks=!interaction.playClicks,interaction.playClicks?"EASTER EGG ON":"EASTER EGG OFF"}